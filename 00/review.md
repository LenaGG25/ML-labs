1. —Ç—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª –≤ –º–∞—à–∏–Ω–Ω–æ–º –æ–±—É—á–µ–Ω–∏–∏ –ø—Ä–æ–≤–µ–¥–∏ —Ä–µ–≤—å—é –∫–æ–¥–∞ @lab11.py

–í–æ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä–µ–≤—å—é –∫–æ–¥–∞ –∏–∑ —Ñ–∞–π–ª–∞ lab11.py —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞, —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏, –ª–æ–≥–∏–∫–∏, –≤–æ–∑–º–æ–∂–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π –∏ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è.

‚úÖ –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞
–ö–æ–¥ —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏—á–Ω—ã–µ —à–∞–≥–∏ EDA, –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É, –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é. –û–¥–Ω–∞–∫–æ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ—Å—Ç, –≥–¥–µ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —á–∏—Ç–∞–µ–º–æ—Å—Ç—å, –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è, —É—Å–∏–ª–∏—Ç—å –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –∏ —Å–ª–µ–¥–æ–≤–∞—Ç—å best practices.

üîç 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–æ–≤
```
!pip install category_encoders
```
üõ† –ó–∞–º–µ—á–∞–Ω–∏–µ:
!pip install –≤–Ω—É—Ç—Ä–∏ .py –∏–ª–∏ .ipynb ‚Äî –ø–ª–æ—Ö–æ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏.
–õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å requirements.txt –∏–ª–∏ environment.yml.
‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
–£–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ–¥–∞ –∏ —É–∫–∞–∑–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç–¥–µ–ª—å–Ω–æ.

üîç 2. –ò–º–ø–æ—Ä—Ç—ã
```
import pandas as pd
import numpy as np
...
from sklearn.model_selection import train_test_split
...
from sklearn.model_selection import train_test_split
from sklearn.ensemble import RandomForestRegressor, ExtraTreesRegressor
import xgboost as xgb
from sklearn.metrics import mean_squared_log_error, r2_score, mean_absolute_error
from sklearn.compose import ColumnTransformer
from sklearn.pipeline import Pipeline
from sklearn.ensemble import RandomForestRegressor  # <- –¥—É–±–ª—å
```
üõ† –ü—Ä–æ–±–ª–µ–º—ã:
–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤ (train_test_split, RandomForestRegressor, xgb, mean_*).
–ò–º–ø–æ—Ä—Ç—ã –Ω–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã (PEP8).
‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
–û–±—ä–µ–¥–∏–Ω–∏—Ç—å –∏ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã:

```
python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
from datetime import datetime
from scipy.stats import zscore

from sklearn.compose import ColumnTransformer
from sklearn.ensemble import ExtraTreesRegressor, RandomForestRegressor
from sklearn.linear_model import Ridge
from sklearn.metrics import mean_absolute_error, mean_squared_log_error, r2_score
from sklearn.model_selection import train_test_split
from sklearn.pipeline import Pipeline
from sklearn.preprocessing import StandardScaler

import category_encoders as ce
import missingno as msno
import xgboost as xgb
```

üîç 3. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
python
df = pd.read_csv("/content/all_v2.csv")
üõ† –ü—Ä–æ–±–ª–µ–º–∞:
–•–∞—Ä–¥–∫–æ–¥ –ø—É—Ç–∏ ‚Äî –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ.
‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

python
DATA_PATH = "data/all_v2.csv"  # –∏–ª–∏ —á–µ—Ä–µ–∑ argparse/Config
df = pd.read_csv(DATA_PATH)
üîç 4. EDA –∏ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞
```
df.info(verbose=True, show_counts=True)
df.isna().sum()

df = df.drop_duplicates()
```
‚úÖ –ü–ª—é—Å—ã:
–•–æ—Ä–æ—à–∏–π EDA: –¥—É–±–ª–∏–∫–∞—Ç—ã, –ø—Ä–æ–ø—É—Å–∫–∏, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤—ã–±—Ä–æ—Å–æ–≤.
üîé –ó–∞–º–µ—á–∞–Ω–∏—è:
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–µ–≥–∏–æ–Ω—É: df = df[df['region']==2661] ‚Äî –º–∞–≥–∏—á–µ—Å–∫–æ–µ —á–∏—Å–ª–æ. –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤—ã–±—Ä–æ—Å–æ–≤ –ø–æ area, kitchen_area, price ‚Äî –ª–æ–≥–∏—á–Ω–∞, –Ω–æ –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ —Ñ—É–Ω–∫—Ü–∏—é –∏–ª–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
```
MIN_PRICE, MAX_PRICE = 1_500_000, 50_000_000
mask = (
    df['area'].between(20, 200) &
    df['kitchen_area'].between(6, 30) &
    df['price'].between(MIN_PRICE, MAX_PRICE)
)
```
üîç 5. Feature Engineering
```
df['dt'] = pd.to_datetime(df['date'] + ' ' + df['time'])
ref = pd.to_datetime('2025-05-20')
df['ad_age_days'] = (ref - df['dt']).dt.days
```
üõ† –ü—Ä–æ–±–ª–µ–º–∞:
ref ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–∞—Ç–∞. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤—è—Ç—Å—è ‚Äî –ø—Ä–∏–∑–Ω–∞–∫ —Å—Ç–∞–Ω–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º.
–í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å df['dt'].max() –∏–ª–∏ —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É.
‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
```
ref = df['dt'].max()  # –∏–ª–∏ datetime.now()
```
üîç 6. –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
```
cat_cols = df_model.select_dtypes(include='object').columns.tolist()
encoder = ce.BinaryEncoder(cols=cat_cols)
df_enc = encoder.fit_transform(df_model)
```
‚úÖ –ü–ª—é—Å—ã:
–•–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–µ—Ä–µ–≤—å–µ–≤ –∏ –ª–∏–Ω–µ–π–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π.
üõ† –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ColumnTransformer + Pipeline –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏.
–°–µ–π—á–∞—Å: –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è "–≤—Ä—É—á–Ω—É—é" ‚Äî –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ.
‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ:
```
preprocessor = ColumnTransformer(
    transformers=[
        ('num', StandardScaler(), num_cols),
        ('cat', ce.BinaryEncoder(), cat_cols)
    ],
    remainder='passthrough'
)
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ Pipeline
```
pipe = Pipeline([
    ('preprocessor', preprocessor),
    ('regressor', Ridge())
])
```
üîç 7. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
```
X_train_s = X_train.copy()
X_train_s[num_cols] = scaler.fit_transform(X_train[num_cols])
```

üõ† –ü—Ä–æ–±–ª–µ–º–∞:
–ò–∑–±—ã—Ç–æ—á–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å StandardScaler –≤ Pipeline.
‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pipeline ‚Äî –∏–∑–±–∞–≤–ª—è–µ—Ç –æ—Ç –æ—à–∏–±–æ–∫ —É—Ç–µ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —É–ø—Ä–æ—â–∞–µ—Ç –∫–æ–¥.

üîç 8. –ú–µ—Ç—Ä–∏–∫–∏
```
def calc_metrics(y_true, y_pred):
    return {
        'RMSLE': np.sqrt(mean_squared_log_error(y_true, np.maximum(y_pred,0))),
        'R2':    r2_score(y_true, y_pred),
        'MAE':   mean_absolute_error(y_true, y_pred)
    }
```
‚úÖ –ü–ª—é—Å—ã:
–•–æ—Ä–æ—à–æ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è np.maximum(y_pred,0) ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ MSLE.
üõ† –ó–∞–º–µ—á–∞–Ω–∏–µ:
mean_squared_log_error —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã y_true > 0, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å (log1p(price)), –Ω–æ y_pred –º–æ–∂–µ—Ç –±—ã—Ç—å < 0 ‚Üí np.expm1(pred) –≤—Å–µ–≥–¥–∞ > 0, —Ç–∞–∫ —á—Ç–æ –≤ —Ü–µ–ª–æ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ.
üîç 9. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
```
results = []
for name, y_tr, p_tr, y_te, p_te in [
    ('Ridge',    y_train, pred_tr_r, y_test, pred_te_r),
    ('XGBoost',  y_train, pred_tr_x, y_test, pred_te_x),
]:
```
‚úÖ –ü–ª—é—Å—ã:
–ß—ë—Ç–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π.
üõ† –£–ª—É—á—à–µ–Ω–∏–µ:
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏—é (cross_val_score) –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ train_test_split.
üîç 10. Feature Importance
```
coef = pd.Series(np.abs(ridge.coef_), index=X_train_s.columns)
imp = pd.Series(xgb_model.feature_importances_, index=X_train.columns)
```
‚úÖ –û—Ç–ª–∏—á–Ω–æ:
–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤.
üîç 11. –ü—Ä–æ–≥–Ω–æ–∑ –¥–ª—è –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞
```
new = pd.DataFrame([{...}])
...
pred_ridge = ridge.predict(new_X_s)[0]
pred_xgb   = xgb_model.predict(new_X)[0]
```
üõ† –ü—Ä–æ–±–ª–µ–º—ã:
new[model_cols].fillna(0) ‚Äî –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ. –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –ª—É—á—à–µ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –æ—Å–º—ã—Å–ª–µ–Ω–Ω–æ.
reindex(columns=X_train.columns, fill_value=0) ‚Äî –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –Ω—É–ª–∏, –Ω–æ –ª—É—á—à–µ —è–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å.
‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ:
–û–±–µ—Ä–Ω—É—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏—é predict_new().
–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤.
üîç 12. –í—Ç–æ—Ä–æ–π –¥–∞—Ç–∞—Å–µ—Ç rent
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –Ω–æ:

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è get_dummies –≤–º–µ—Å—Ç–æ BinaryEncoder ‚Äî –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞, –Ω–æ –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å.
zscore —Å fillna(mean) ‚Äî –º–æ–∂–µ—Ç –∏—Å–∫–∞–∑–∏—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ.
‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
–ó–∞–º–µ–Ω–∏—Ç—å Z-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –Ω–∞ IQR –∏–ª–∏ IsolationForest –¥–ª—è –≤—ã–±—Ä–æ—Å–æ–≤.
–ò–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å, –Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π.
‚úÖ –û–±—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ | |--------|--------| | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ | –í—ã–Ω–µ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –±–ª–æ–∫–∏ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, train_and_evaluate()) | | –•–∞—Ä–¥–∫–æ–¥ –¥–∞—Ç –∏ –ø—É—Ç–µ–π | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–ª–∏ config | | –†—É—á–Ω–∞—è –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pipeline + ColumnTransformer | | –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ | –î–æ–±–∞–≤–∏—Ç—å cross_val_score –∏–ª–∏ TimeSeriesSplit | | –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | –î–æ–±–∞–≤–∏—Ç—å logging –∏–ª–∏ print(f"Training {name}...") | | –ù–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π | joblib.dump(model, 'model.pkl') |

üí° –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
‚úÖ –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏ –∏–º–ø–æ—Ä—Ç–æ–≤.
‚úÖ –ó–∞–º–µ–Ω–∏—Ç—å —Ö–∞—Ä–¥–∫–æ–¥ –Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã.
‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Pipeline –∏ ColumnTransformer.
‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∫—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏—é.
‚úÖ –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –≤ —Ñ—É–Ω–∫—Ü–∏–∏ (EDA, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –æ–±—É—á–µ–Ω–∏–µ).
‚úÖ –£–ª—É—á—à–∏—Ç—å –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
‚úÖ –°–æ—Ö—Ä–∞–Ω—è—Ç—å –ª—É—á—à—É—é –º–æ–¥–µ–ª—å.
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ —à–∞–≥–∏ (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏).
–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Pipeline –∏ cross_val_score –≤ –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–º —Å—Ç–∏–ª–µ. –ù–∞–ø–∏—à–∏: "–ü–µ—Ä–µ–ø–∏—à–∏ —Å Pipeline".

 
2. —Ç—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª –≤ –æ–ª–∏–º–ø–∏–∞–¥–Ω–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ–≤–µ–¥–∏ —Ä–µ–≤—å—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞ pack-rle @pack-rle.py

–†–µ–≤—å—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞ pack-rle.py:

–í —Ü–µ–ª–æ–º, –∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–æ—Å—Ç –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω, –Ω–æ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å.

–§—É–Ω–∫—Ü–∏—è 
rle_pack
 –∏–º–µ–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å O(n), –≥–¥–µ n ‚Äî –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏. –≠—Ç–æ –ø–æ—Ç–æ–º—É, —á—Ç–æ –æ–Ω–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ —Å—Ç—Ä–æ–∫–µ –≤—Å–µ–≥–æ –æ–¥–∏–Ω —Ä–∞–∑ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ–Ω—Å—Ç–∞–Ω—Ç–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.

–í —Ñ—É–Ω–∫—Ü–∏–∏ 
rle_pack
 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è current_char, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ç–µ–∫—É—â–∏–π —Å–∏–º–≤–æ–ª —Å—Ç—Ä–æ–∫–∏. –û–¥–Ω–∞–∫–æ –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å ch –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä ==. –≠—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å, –∏—Å–ø–æ–ª—å–∑—É—è –ª–∏—Ç–µ—Ä–∞–ª—ã ord() –∏ chr(), —á—Ç–æ–±—ã –Ω–∞–ø—Ä—è–º—É—é —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∫–æ–¥—ã —Å–∏–º–≤–æ–ª–æ–≤.

–í —Ñ—É–Ω–∫—Ü–∏–∏ 
rle_pack
 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è count, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ö–æ–∂–¥–µ–Ω–∏–π —Ç–µ–∫—É—â–µ–≥–æ —Å–∏–º–≤–æ–ª–∞. –û–¥–Ω–∞–∫–æ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–Ω–∞ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫—É —Å –ø–æ–º–æ—â—å—é str(count). –≠—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å, –∏—Å–ø–æ–ª—å–∑—É—è –ª–∏—Ç–µ—Ä–∞–ª—ã str() —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.

–§—É–Ω–∫—Ü–∏—è 
main
 —á–∏—Ç–∞–µ—Ç —Å—Ç—Ä–æ–∫—É —Å stdin –∏ –≤—ã–≤–æ–¥–∏—Ç RLE-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ. –í –Ω–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è 
rle_pack
, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π —á–∞—Å—Ç—å—é –ø—Ä–æ–≥—Ä–∞–º–º—ã.

–í —Ü–µ–ª–æ–º, –∞–ª–≥–æ—Ä–∏—Ç–º simple and efficient, but there are some things that can be improved.

Python

```
def rle_pack(s: str) -> str:
    """
    Simple RLE compression of a string.
    
    Args:
        s: The input string.
    
    Returns:
        The compressed string.
    """
    if not s:
        return ""

    result = []
    current_char = s[0]
    count = 1

    for ch in s[1:]:
        # Use ord() and chr() to compare character codes
        if ord(ch) == ord(current_char):
            count += 1
        else:
            result.append(current_char + str(count))
            current_char = ch
            count = 1

    result.append(current_char + str(count))

    return "".join(result)
```
–í–æ—Ç —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ rle_pack.
